services:
    gos_pubsub_router.cache_warmer.router:
        class: Gos\Bundle\PubSubRouterBundle\CacheWarmer\RouterCacheWarmer
        arguments:
            - '@Psr\Container\ContainerInterface'
        tags:
            - { name: container.service_subscriber, id: 'gos_pubsub_router.router_registry' }
            - { name: kernel.cache_warmer }

    gos_pubsub_router.command.debug_router:
        class: Gos\Bundle\PubSubRouterBundle\Command\DebugRouterCommand
        arguments:
            - '@gos_pubsub_router.router_registry'
        tags:
            - { name: console.command, command: gos:prouter:debug }

    gos_pubsub_router.loader.yaml:
        class: Gos\Bundle\PubSubRouterBundle\Loader\YamlFileLoader
        public: false
        arguments:
            - '@file_locator'
        tags:
            - { name: gos_pubsub_router.routing.loader }

    gos_pubsub_router.router.cache_warmer:
        alias: gos_pubsub_router.cache_warmer.router

    gos_pubsub_router.router.registry:
        alias: gos_pubsub_router.router_registry

    gos_pubsub_router.router_registry:
        class: Gos\Bundle\PubSubRouterBundle\Router\RouterRegistry
        public: false

    gos_pubsub_router.routing.loader:
        class: Symfony\Component\Config\Loader\DelegatingLoader
        arguments:
            - '@gos_pubsub_router.routing.resolver'

    gos_pubsub_router.routing.resolver:
        class: Symfony\Component\Config\Loader\LoaderResolver
